<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/rnds/blog/rss.xml" title="RNDS Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rnds/blog/atom.xml" title="RNDS Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="RNDS" href="/rnds/opensearch.xml"><title data-react-helmet="true">Conector | RNDS</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Conector | RNDS"><meta data-react-helmet="true" name="description" content="Conector √© o nome dado √† solu√ß√£o tecnol√≥gica que acessa a RNDS. √â este software que precisa ser desenvolvido pelo integrador e, de fato, o que implementa a troca de informa√ß√£o em sa√∫de com a RNDS. Por exemplo, no contexto de um laboratorio, faz parte das fun√ß√µes do Conector enviar o resultado de um exame laboratorial para a RNDS."><meta data-react-helmet="true" property="og:description" content="Conector √© o nome dado √† solu√ß√£o tecnol√≥gica que acessa a RNDS. √â este software que precisa ser desenvolvido pelo integrador e, de fato, o que implementa a troca de informa√ß√£o em sa√∫de com a RNDS. Por exemplo, no contexto de um laboratorio, faz parte das fun√ß√µes do Conector enviar o resultado de um exame laboratorial para a RNDS."><meta data-react-helmet="true" property="og:url" content="https://kyriosdata.github.io/rnds/docs/conector"><link data-react-helmet="true" rel="shortcut icon" href="/rnds/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://kyriosdata.github.io/rnds/docs/conector"><link rel="stylesheet" href="/rnds/styles.d3872c8c.css">
<link rel="preload" href="/rnds/styles.0dfdfb78.js" as="script">
<link rel="preload" href="/rnds/runtime~main.ea325c56.js" as="script">
<link rel="preload" href="/rnds/main.83a45ca9.js" as="script">
<link rel="preload" href="/rnds/1.9718fca7.js" as="script">
<link rel="preload" href="/rnds/2.170e44de.js" as="script">
<link rel="preload" href="/rnds/3.4645edd5.js" as="script">
<link rel="preload" href="/rnds/1be78505.0290ccf8.js" as="script">
<link rel="preload" href="/rnds/82.5dd44e3a.js" as="script">
<link rel="preload" href="/rnds/f976f453.324c23db.js" as="script">
<link rel="preload" href="/rnds/17896441.dd11868a.js" as="script">
<link rel="preload" href="/rnds/efcb63d8.d8a67793.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/rnds/"><img src="/rnds/img/guia-logo.png" alt="Guia de Integra√ß√£o RNDS" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/rnds/img/guia-logo.png" alt="Guia de Integra√ß√£o RNDS" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Guia</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rnds/docs/introducao">Conte√∫do</a><a class="navbar__item navbar__link" href="/rnds/blog">Not√≠cias</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><div class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></div></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/rnds/"><img src="/rnds/img/guia-logo.png" alt="Guia de Integra√ß√£o RNDS" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/rnds/img/guia-logo.png" alt="Guia de Integra√ß√£o RNDS" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Guia</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/rnds/docs/introducao">Conte√∫do</a></li><li class="menu__list-item"><a class="menu__link" href="/rnds/blog">Not√≠cias</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/rnds/docs/introducao">Introdu√ß√£o</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/rnds/docs/conector">Conector</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">P√∫blico-alvo</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/publico-alvo/publico-alvo">Quem?</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Gestor</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/publico-alvo/gestor/gestor">Atribui√ß√µes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/publico-alvo/gestor/certificado">Certificado digital</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/publico-alvo/gestor/gov.br">Criar conta gov.br</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/publico-alvo/gestor/portal">Solicitar acesso</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/publico-alvo/gestor/identificador">Identificador do solicitante</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Integrador</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/publico-alvo/ti/ti">Atribui√ß√µes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/publico-alvo/ti/conhecer">Conhecer os servi√ßos</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/publico-alvo/ti/homologar">Homologar</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/publico-alvo/ti/producao">Colocar em produ√ß√£o</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/publico-alvo/ti/requisicoes">Requisi√ß√µes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/publico-alvo/ti/erros">Erros</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/publico-alvo/ti/autenticacao">Autentica√ß√£o</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/rnds/docs/passo-a-passo">Passo a passo</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">RNDS</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rnds/padrao">Padr√£o</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rnds/ambientes">Ambientes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rnds/servicos">Servi√ßos</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rnds/definicoes">Defini√ß√µes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rnds/tecnologias">Ecossistema FHIR</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Ferramentas</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rnds/tools/api">RNDS API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rnds/tools/bibliotecas">Bibliotecas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rnds/tools/fhirpath">FHIRPath</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rnds/tools/keytool">keytool</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rnds/tools/validacao">Valida√ß√£o</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rnds/tools/fhirserver">Servidor FHIR</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Resultado de Exame Laboratorial (REL)</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rel/objetivo-rel">Objetivo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rel/mi-rel">Modelo de Informa√ß√£o</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rel/mc-rel">Modelo Computacional</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rel/intro/glossario">Gloss√°rio</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Sum√°rio de Alta (SA)</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/sa/objetivo-sa">Objetivo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/sa/mi-sa">Modelo de Informa√ß√£o</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/sa/mc-sa">Modelo Computacional</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/sa/pa-sa">P√∫blico-alvo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/sa/contexto-sa">Contexto</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/sa/glossario-sa">Gloss√°rio</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Registro de Atendimento Cl√≠nico (RAC)</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rac/objetivo-rac">Objetivo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rac/mi-rac">Modelo de Informa√ß√£o</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rac/mc-rac">Modelo Computacional</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rac/pa-rac">P√∫blico-alvo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rac/contexto-rac">Contexto</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/rac/glossario-rac">Gloss√°rio</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Registro de Imunobiol√≥gico Administrado (RIA)</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/ria/objetivo-ria">Objetivo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/ria/mi-ria">Modelo de Informa√ß√£o</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/ria/mc-ria">Modelo Computacional</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/ria/pa-ria">P√∫blico-alvo</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/ria/contexto-ria">Contexto</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/rnds/docs/ria/glossario-ria">Gloss√°rio</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/rnds/docs/faq">Perguntas &amp; Respostas</a></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Conector</h1></header><div class="markdown"><p>Conector √© o nome dado √† solu√ß√£o tecnol√≥gica que acessa a RNDS. √â este software que precisa ser desenvolvido pelo integrador e, de fato, o que implementa a troca de informa√ß√£o em sa√∫de com a RNDS. Por exemplo, no contexto de um laboratorio, faz parte das fun√ß√µes do Conector enviar o resultado de um exame laboratorial para a RNDS.</p><p>As se√ß√µes seguintes apresentam quest√µes t√≠picas da integra√ß√£o com a RNDS por meio de um Conector de refer√™ncia, abstrato o suficiente para que possa servir de orienta√ß√£o para v√°rios estabelecimentos de sa√∫de interessados em detalhes t√©cnicos da integra√ß√£o com a RNDS.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="sistema-de-informa√ß√£o-em-sa√∫de-sis"></a>Sistema de Informa√ß√£o em Sa√∫de (SIS)<a class="hash-link" href="#sistema-de-informa√ß√£o-em-sa√∫de-sis" title="Direct link to heading">#</a></h2><p>Um estabelecimento de sa√∫de usa, em geral, um Sistema de Informa√ß√£o em Sa√∫de (SIS) para auxiliar na gest√£o das suas demandas, usu√°rios, profissionais de sa√∫de, procedimentos e outros. Tal sistema est√° ou n√£o integrado √† RNDS, o que √© ilustrado pelos
cen√°rios abaixo.</p><p><img alt="img" src="/rnds/assets/images/cenarios-9844131e1f337994115f112e4ca00e26.png"></p><p>Adicionalmente, pode-se representar abstratamente qualquer SIS como a uni√£o de dois componentes: (a) um Banco de Dados, no qual informa√ß√µes administrativas e outras de sa√∫de s√£o armazenadas; e (b) o software propriamente dito do SIS.</p><p>Esta organiza√ß√£o abstrada de um SIS em apenas dois componetes √© √∫til para identificar o que √© denominado de Conector, o que √© feito abaixo por meio dos dois cen√°rios ilustrados acima.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="sem-integra√ß√£o"></a>Sem integra√ß√£o<a class="hash-link" href="#sem-integra√ß√£o" title="Direct link to heading">#</a></h3><p>Usando esta abstra√ß√£o, quando n√£o h√° interoperabilidade do SIS com outro sistema, n√£o h√° software de integra√ß√£o, n√£o h√° Conector e, consequentemente, n√£o h√° integra√ß√£o com a RNDS, conforme ilustrado abaixo.</p><p><img alt="img" src="/rnds/assets/images/rnds-m0-c8a4d85968e74b306ce21426e7bd8f59.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="com-integra√ß√£o"></a>Com integra√ß√£o<a class="hash-link" href="#com-integra√ß√£o" title="Direct link to heading">#</a></h3><p>A integra√ß√£o exige a exist√™ncia do Conector.
A implementa√ß√£o das fun√ß√µes deste software pode assumir v√°rias formas. Duas delas s√£o apresentadas abaixo.</p><p>Na primeira, o SIS empregado pelo estabelecimento de sa√∫de passa por uma manuten√ß√£o na qual as fun√ß√µes do Conector s√£o fundidas ao SIS existente. O SIS, agora modificado, torna-se um SIS que interage com a RNDS, um SIS integrado √† RNDS.</p><p><img alt="img" src="/rnds/assets/images/rnds-m1-e19e25d72401182dc7c556e3c4c39b64.png"></p><p>Na segunda, um componente espec√≠fico re√∫ne e isola as fun√ß√µes necess√°rias para a integra√ß√£o com a RNDS, diferente do cen√°rio anterior. Neste caso, √© poss√≠vel que o Conector seja encarregado de obter as informa√ß√µes em sa√∫de a serem transferidas, possivelmente acessando diretamente o Banco de Dados do estabelecimento de sa√∫de.</p><p><img alt="img" src="/rnds/assets/images/rnds-m2-2661ffa2db54833a49857e1e16e127fc.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="design-do-conector-sem-restri√ß√µes"></a><em>Design</em> do Conector (sem restri√ß√µes)<a class="hash-link" href="#design-do-conector-sem-restri√ß√µes" title="Direct link to heading">#</a></h3><p>Conv√©m esclarecer que estas duas formas de integra√ß√£o n√£o s√£o as √∫nicas, e que a RNDS n√£o imp√µe exig√™ncias na organiza√ß√£o do SIS em quest√£o. De fato, nem sequer h√° uma sugest√£o de <em>design</em> para o Conector, o que depende de in√∫meras vari√°veis espec√≠ficas de cada estabelecimento de sa√∫de e, consequentemente, √© assunto interno de cada estabelecimento.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="conector-de-refer√™ncia"></a>Conector de refer√™ncia<a class="hash-link" href="#conector-de-refer√™ncia" title="Direct link to heading">#</a></h2><p>Tendo em vista as especificidades de cada integra√ß√£o, √∫nica por estabelecimento de sa√∫de, n√£o √© fact√≠vel definir uma an√°lise e um <em>design</em> adequados para todos eles. O que segue, portanto, √© uma investiga√ß√£o preliminar com o objetivo de oferecer uma orienta√ß√£o para integradores. A estrat√©gia √© familiarizar o integrador com quest√µes naturais da integra√ß√£o com a RNDS.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="escopo"></a>Escopo<a class="hash-link" href="#escopo" title="Direct link to heading">#</a></h3><p>O Conector, como qualquer outro software, visa atender alguma demanda. Para o Conector de refer√™ncia a demanda (escopo) √© a Portaria 1.792, que determina a obrigatoriedade de notifica√ß√£o de resultados de exame da COVID-19. Conv√©m observar que a notifica√ß√£o de laudo de COVID-19 √© a primeira necessidade de troca de informa√ß√£o contemplada pela RNDS.</p><p>Ao longo do tempo, outras necessidades ser√£o inclu√≠das, como a notifica√ß√£o do Sum√°rio de Alta (SA) e do Registro de Atendimento Cl√≠nico (RAC), por exemplo. Cada necessidade √© detalhada tanto pelo modelo de informa√ß√£o quanto pelo modelo computacional, o que viabiliza a integra√ß√£o com a RNDS para a necessidade em quest√£o.</p><p>Naturalmente, √† medida que novas necessidades de integra√ß√£o forem implementadas pela RNDS, mais informa√ß√µes em sa√∫de e outros tipos de estabelecimentos de sa√∫de estar√£o envolvidos.</p><p><img alt="img" src="/rnds/assets/images/rnds-percurso-a54edb82e15fa3898b12751b4431e759.png"></p><p>Apesar do Conector de refer√™ncia atender uma necessidade espec√≠fica (notificar laudos de COVID-19), a discuss√£o do mesmo permanece relevante para outras demandas.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="requisitos"></a>Requisitos<a class="hash-link" href="#requisitos" title="Direct link to heading">#</a></h2><p>A integra√ß√£o, no escopo identificado acima, possui dois casos de uso principais: <em>Obter token de acesso</em> e <em>Enviar resultado de exame</em>.</p><p><img alt="img" src="/rnds/assets/images/rnds-uc-6ba1956ef96ffc7c1b47c5c0c557672b.png"></p><p>Um Conector pode envolver outras fun√ß√µes. Por exemplo, responder se um determinado resultado foi submetido satisfatoriamente ou n√£o e recuperar a resposta da RNDS para uma dada notifica√ß√£o entregue s√£o algumas das possibilidades. Estas fun√ß√µes s√£o possivelmente necess√°rias, mas ao mesmo tempo &quot;gen√©ricas&quot;, n√£o s√£o espec√≠ficas da integra√ß√£o com a RNDS. Em consequ√™ncia, apenas os casos de uso citados acima s√£o considerados.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Nota</h5></div><div class="admonition-content"><p>Compreender os casos de uso <em>Obter token de acesso</em> e <em>Enviar resultado de exame</em> significa compreender o que √© relevante para qualquer integra√ß√£o com a RNDS, e n√£o apenas para a notifica√ß√£o de resultado do COVID-19. Eles representam a seguran√ßa e uma necessidade de interoperabilidade em sa√∫de, respectivamente.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="obter-token-de-acesso"></a>Obter token de acesso<a class="hash-link" href="#obter-token-de-acesso" title="Direct link to heading">#</a></h3><p>A obten√ß√£o de um <em>token</em> de acesso √© necess√°ria para identificar o estabelecimento de sa√∫de e verificar se o mesmo possui acesso aos servi√ßos que ir√° requisitar √† RNDS. Esta fun√ß√£o, portanto, √© exclusivamente para seguran√ßa.</p><p>Ser√° necess√°rio o certificado digital (e-CPF ou e-CNPJ) associado ao estabelecimento de sa√∫de e a senha de acesso ao certificado. Estas duas informa√ß√µes ser√£o empregadas para
efetuar uma requisi√ß√£o <em>https</em> que, se executada satisfatoriamente, dever√° retornar um objeto JSON como aquele abaixo.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;access_token&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;longa sequ√™ncia de caracteres&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;scope&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;read write&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;token_type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;jwt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;expires_in&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1800000</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>O que interessa √© o valor para <code>access_token</code>, uma sequ√™ncia
de mais de 2K caracteres. Outro valor retornado √© o tempo
de validade deste <em>token</em>, neste caso, 30min, ou 1.800.000ms. A expectativa √© de que o Conector s√≥ realize uma requisi√ß√£o para obter <em>token</em> de acesso cerca de 30 minutos ap√≥s a √∫ltima requisi√ß√£o. Neste intervalo, o Conector deve guardar o valor do <em>token</em> a ser reutilizado, at√© que seja substitu√≠do por uma nova requisi√ß√£o, cerca de 30 minutos depois.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>IMPORTANTE</h5></div><div class="admonition-content"><p>O Conector deve reutilizar o valor obtido para <code>access_token</code>
durante o per√≠odo em que ele √© v√°lido. Isto significa que
muitas requisi√ß√µes aos <em>web services</em> de sa√∫de possivelmente ser√£o feitas usando um mesmo valor de <em>token</em>, obtido de uma
√∫nica requisi√ß√£o para um <em>web service</em> de seguran√ßa.</p></div></div><p>A obten√ß√£o do <em>token</em> de acesso √© uma forma de autentica√ß√£o
do Conector, ou melhor, do estabelecimento de sa√∫de, usando
um certificado digital, uma estrat√©gia mais segura que a autentica√ß√£o comum usando o par usu√°rio/senha.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Java e JavaScript</h5></div><div class="admonition-content"><p>Em <a href="https://github.com/kyriosdata/rnds" target="_blank" rel="noopener noreferrer">https://github.com/kyriosdata/rnds</a> encontram-se os
projetos <code>rnds-java</code> e <code>rnds-js</code>, ambos ilustram como obter
o <em>token</em> de acesso, respectivamente nas linguagens Java e JavaScript.</p></div></div><p>Aos interessados, muita informa√ß√£o pode ser encontrada
na internet para o assunto &quot;ssl client authentication&quot;.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="enviar-resultado-de-exame"></a>Enviar resultado de exame<a class="hash-link" href="#enviar-resultado-de-exame" title="Direct link to heading">#</a></h3><p>Na perspectiva de processos (fun√ß√µes) e do fluxo de informa√ß√µes entre eles, o envio de resultado de exame √© ilustrado abaixo. Aqueles processos coloridos s√£o gen√©ricos no sentido em que n√£o dependem do SIS em quest√£o. Os demais dependem diretamente do SIS para o qual o Conector √© criado.</p><p><img alt="img" src="/rnds/assets/images/rnds-dfd-65b559a17aeb27622bfb54fb86950da4.png"></p><p>As fun√ß√µes s√£o comentadas abaixo ap√≥s ressaltar que, dependendo do SIS em quest√£o, algumas delas podem n√£o ser
necess√°rias. Por exemplo, se um dado SIS j√° guarda informa√ß√µes sobre cada resultado de exame em documento XML pr√≥prio, ent√£o n√£o ser√° necess√°rio coletar informa√ß√µes dispersas, filtrar e talvez nem tampouco efetuar algum mapeamento. Ou, se preferir,
estas fun√ß√µes foram realizadas, mas em momento distinto do
envio propriamente dito.</p><ul><li><p><strong>Filtrar dados</strong>. Seleciona os dados de um resultado de exame contendo o que √© necess√°rio para o envio.</p></li><li><p><strong>Mapear dados</strong>. Realiza a convers√£o e/ou mapeamento, se for o caso, entre o que √© recuperado (fun√ß√£o acima) e o formato exigido pela RNDS. Por exemplo, a data &quot;01/01/21&quot; √©
mapeada para &quot;01/01/2021&quot;.</p></li><li><p><strong>Criar inst√¢ncia de recurso</strong>. Os dados j√° filtrados e mapeados empregam uma estrutura de dados que precisa ser representada em JSON, em conformidade com o recurso FHIR (<em>resource</em>) pertinente.</p></li><li><p><strong>Montar bundle</strong>. Empacota os recursos pertinentes na representa√ß√£o JSON de um <em>Bundle</em> (um dos recursos FHIR).
Quando executada, esta fun√ß√£o tamb√©m pode realizar a
verifica√ß√£o da representa√ß√£o resultante. Ou seja, assegurar
que foi criada conforme esperado pela RNDS.</p></li><li><p><strong>Obter token</strong>. Obt√©m <em>token</em> do <em>web service</em> de seguran√ßa da RNDS para acesso aos demais servi√ßos.</p></li><li><p><strong>Submeter requisi√ß√£o</strong>. Notifica o resultado de um exame √† RNDS. Esta √© a fun√ß√£o que, de fato, realiza o envio desejado, faz uso de um <em>web service</em> com foco na sa√∫de. Observe que este envio depende do <em>token</em> obtido pela fun√ß√£o acima.</p></li></ul><p>A figura abaixo ilustra os processos executados em uma sequ√™ncia t√≠pica, al√©m do <em>web service</em> de seguran√ßa e daqueles de sa√∫de oferecidos pela RNDS, identificados respectivamente por <em>Auth</em> e <em>EHR</em>. Em tempo, tais servi√ßos s√£o oferecidos pelos <a href="/rnds/docs/rnds/ambientes">ambientes</a> da RNDS.</p><p><img alt="img" src="/rnds/assets/images/desenvolvedor-9a5d747dfa95143512fe6021317e9e23.png"></p><p>Conv√©m esclarecer que a especifica√ß√£o de requisitos de software est√° al√©m do alcance deste documento, dado que s√≥ poderia ser produzida para uma situa√ß√£o espec√≠fica de integra√ß√£o. A boa not√≠cia √© que estaria al√©m do necess√°rio
para a forma√ß√£o do integrador.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="design"></a>Design<a class="hash-link" href="#design" title="Direct link to heading">#</a></h2><p>Os cass de uso podem ser realizadas de v√°rias maneiras. Abaixo segue apenas um poss√≠vel <em>design</em>, dado que n√£o s√£o fornecidos detalhes de uma integra√ß√£o espec√≠fica. Nesta poss√≠vel solu√ß√£o, o Conector √© implementado por um
microsservi√ßo acionado por evento.</p><blockquote><p>IMPORTANTE: o emprego de um
microsservi√ßo visa ilustrar como o Conector pode ser
implementado, em algum poss√≠vel cen√°rio, e n√£o se confunde com uma recomenda√ß√£o.</p></blockquote><p>O evento sinaliza a gera√ß√£o de um laudo de exame, conforme ilustrado abaixo. Dessa forma, o
SIS √© modificado para gerar um evento, e o microsservi√ßo (Conector)
notifica o Minist√©rio da Sa√∫de por meio da RNDS.</p><p><img alt="img" src="/rnds/assets/images/rnds-m3-2068260764a8e528e9f07eeabe85a72b.png"></p><p>O Conector est√° isolado do restante do SIS, √© um microsservi√ßo. O <em>design</em> do
c√≥digo deste microsservi√ßo pode ser influenciado por v√°rios fatores, quest√£o j√° levantada anteriormente, at√© mesmo a forma√ß√£o do integrador e a expectativa de qualidade para o Conector, por exemplo, dentre muitos outros. Ou seja, √© natural existirem alternativas para o que segue, inclusive &quot;melhores&quot; (sugest√µes s√£o bem-vindas).</p><p>Considera√ß√µes feitas, a orienta√ß√£o √© um <em>design</em> que privilegie a legibilidade e
a manutenibilidade. Qualquer outra quest√£o ser√° secund√°ria a estas.</p><p>A vis√£o funcional do caso de uso <em>Enviar resultado de exame</em> inspira o <em>design</em>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="esbo√ßo-inicial"></a>Esbo√ßo inicial<a class="hash-link" href="#esbo√ßo-inicial" title="Direct link to heading">#</a></h3><p>Em um primeiro esfor√ßo foram identificadas as classes abaixo. Aquelas n√£o coloridas realizam as fun√ß√µes do neg√≥cio (caso de uso <em>Enviar resultado de exame</em>). As demais
oferecem o suporte necess√°rio.</p><p><img alt="img" src="/rnds/assets/images/conector-domain-v0-de2924ddb5e16c2cab25501a5d9f23ac.png"></p><p>A classe <code>Conector</code> encapsula a conex√£o do SIS com o microsservi√ßo. Desta forma,
a implementa√ß√£o correspondente, por exemplo, se uma requisi√ß√£o <em>https</em> ou o envio
de uma mensagem por meio de <a href="https://activemq.apache.org/" target="_blank" rel="noopener noreferrer">ActiveMQ</a> (<em>message broker</em>) ou <a href="https://aws.amazon.com/sns/" target="_blank" rel="noopener noreferrer">SNS</a>, fica encapsulada nesta classe.
Em consequ√™ncia, o c√≥digo que faz uso desta classe executa uma simples mensagem como
<code>Conector.notifique(resultado)</code>, por exemplo.</p><p>Este microsservi√ßo deve possuir o seu pr√≥prio reposit√≥rio onde s√£o registradas as
requisi√ß√µes recebidas e os resultados obtidos das submiss√µes. Cada submiss√£o re√∫ne o que √© submetido, o <code>Resultado</code> de um exame e a resposta apresentada pela RNDS (para eventual consulta posterior). Talvez um nome melhor
para o reposit√≥rio seja <code>ConectorRepositry</code>, em vez de <code>ResultadoRepository</code>.</p><p>O envio propriamente dito de informa√ß√£o para a RNDS est√° encapsulada na classe <code>RNDSProxy</code>. Este envio depende do <em>token</em> de acesso cuja gest√£o pode estar encapsulada
na classe <code>TokenCache</code>. Naturalmente, estas fun√ß√µes dependem de valores que variam ao
longo do tempo e s√£o obtidos, nesta proposta, pela classe <code>Configuracao</code>. Por exemplo, o certificado digital e a senha correspondente s√£o algumas das informa√ß√µes obtidas por meio desta classe.</p><p>As tr√™s classes comentadas no par√°grafo anterior implementam fun√ß√µes de acesso √† RNDS e, naturalmente, devem ser reutilizadas, o que as tornam candidatas a serem transferidas para uma biblioteca. A biblioteca <a href="https://www.npmjs.com/package/rnds" target="_blank" rel="noopener noreferrer">rnds</a> √© um exemplo deste <em>design</em>.</p><p>Em consequ√™ncia, podemos definir duas bibliotecas e nos concentrar, na pr√≥xima vers√£o, apenas no neg√≥cio <em>Enviar resultado de exame</em>, e abstrair as fun√ß√µes de suporte.</p><p><img alt="img" src="/rnds/assets/images/conector-bibliotecas-bf741d17a61a01f414f9cd09ef6e318a.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="esbo√ßo-resultante"></a>Esbo√ßo resultante<a class="hash-link" href="#esbo√ßo-resultante" title="Direct link to heading">#</a></h3><p>Tratar as fun√ß√µes (processos) filtrar, mapear e demais como fun√ß√£o (<a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Function.html" target="_blank" rel="noopener noreferrer">Function</a> em Java) √© um passo natural. Sim, o <em>design</em>, neste caso, sofre influ√™ncia de Java, embora possa ser implementado usando C#, por exemplo, por meio de <em>delegates</em>. Noutras palavras, este
<em>design</em> n√£o √© restrito √† Java.</p><p>A figura abaixo refina as classes identificadas anteriormente, cada uma delas com uma
fun√ß√£o bem-definida, em classe pr√≥pria, o que promove a coes√£o. A combina√ß√£o delas,
em uma √∫nica linha, conforme ilustrada na figura, sugere que √© uma alternativa a ser considerada para transformar uma <code>Resposta</code> na representa√ß√£o JSON de um <em>Bundle</em> (recurso FHIR), esperado pela RNDS.</p><p><img alt="img" src="/rnds/assets/images/conector-domain-v1-36743b3f61b34044ae048c1e7f9d643e.png"></p><p>A classe <code>Filtrar</code> implementa a fun√ß√£o de mesmo nome identificada acima. Qualquer
que seja a estrutura e as informa√ß√µes em <code>Resultado</code>, o que √© relevante √© depositado em
um dicion√°rio com chave pertinente, por exemplo, &quot;cns&quot; para o CNS do usu√°rio em quest√£o.</p><p>A classe <code>Mapear</code> realiza eventuais mapeamentos, por exemplo, o valor &quot;positivo&quot; para o c√≥digo correspondente esperado pela RNDS e assim por diante.</p><p>A classe <code>ToJson</code> cria a representa√ß√£o JSON para cada recurso FHIR exigido. Por exemplo, um resultado de exame laboratorial de COVID-19 inclui a amostra biol√≥gica. O recurso FHIR correspondente √© <a href="https://www.hl7.org/fhir/specimen.html" target="_blank" rel="noopener noreferrer">Specimen</a>, a especializa√ß√£o ou adapta√ß√£o nacional deste recurso √© denominada de <a href="https://simplifier.net/redenacionaldedadosemsaude/BRAmostraBiologica" target="_blank" rel="noopener noreferrer">Amostra Biol√≥gica</a>. Portanto, respeitando as restri√ß√µes nacionais, definidas na <a href="https://simplifier.net/redenacionaldedadosemsaude/BRAmostraBiologica" target="_blank" rel="noopener noreferrer">Amostra Biol√≥gica</a>, para o recurso FHIR <a href="https://www.hl7.org/fhir/specimen.html" target="_blank" rel="noopener noreferrer">Specimen</a>, ser√° criado o JSON correspondente para o resultado em quest√£o, a ser notificado para a RNDS. Se a amostra biol√≥gica em quest√£o √© sangue, ent√£o a representa√ß√£o JSON correspondente √© aquela abaixo:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;fullUrl&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;urn:uuid:transient-2&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;resource&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;resourceType&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Specimen&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;meta&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;profile&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://www.saude.gov.br/fhir/r4/StructureDefinition/BRAmostraBiologica-1.0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;coding&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;system&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://www.saude.gov.br/fhir/r4/CodeSystem/BRTipoAmostraGAL&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;code&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;SGHEM&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>A representa√ß√£o a ser produzida pela classe <code>ToJson</code> pode ser realizada de v√°rias formas, desde um mapeamento de cada poss√≠vel amostra biol√≥gica para a estrutura correspondente, at√© o uso de uma API como a HAPI FHIR API, na qual se monta uma
inst√¢ncia da classe <code>Specimen</code> usando m√©todos de &quot;alto n√≠vel&quot; (<em>fluent interface</em>). O objeto resultado pode ser serializado usando recursos da pr√≥pria API.</p><p>A classe <code>Empacotar</code> recebe os recursos pertinentes ao resultado j√° serializados e os deposita em um <em>Bundle</em>, que possui seus pr√≥prios atributos, al√©m dos recursos que inclui, o que pode ser facilmente visto no JSON abaixo, onde o valor para <code>identifier</code> e os elementos do vetor <code>entry</code> foram omitidos por simplicidade.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token property">&quot;resourceType&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Bundle&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token property">&quot;type&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;document&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token property">&quot;timestamp&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2020-03-20T00:00:00-03:00&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token property">&quot;meta&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;lastUpdated&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2020-03-20T00:00:00-03:00&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token property">&quot;identifier&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> ... omitido ... </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token property">&quot;entry&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> ... Resultado de Exame Laboratorial ... </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> ... Diagn√≥stico em Laborat√≥rio Cl√≠nico ... </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> ... Amostra Biol√≥gica ... </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Os coment√°rios acima para as classes <code>ToJson</code> e <code>Empacotar</code> podem ser complementados
pelo detalhamento dos dados a serem enviados, ou seja, a discuss√£o do <a href="/rnds/docs/rel/mc-rel">Modelo Computacional</a> de um resultado de exame laboratorial.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="implementa√ß√£o"></a>Implementa√ß√£o<a class="hash-link" href="#implementa√ß√£o" title="Direct link to heading">#</a></h2><p>O <em>design</em> acima organiza o c√≥digo, mas n√£o imp√¥e restri√ß√µes ou define detalhes pela aus√™ncia de um cen√°rio concreto de um estabelecimento de sa√∫de, conforme discutido abaixo, tanto para as bibliotecas identificadas quanto para as fun√ß√µes princiais.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="conector-cliente-aws"></a>conector-cliente (aws)<a class="hash-link" href="#conector-cliente-aws" title="Direct link to heading">#</a></h3><p>A classe <code>Conector</code> deve encapsular a comunica√ß√£o do SIS com Conector e, conforme destacado, isto pode ser feito de in√∫meras formas.</p><p>Em um cen√°rio onde a nuvem da Amazon √© empregada, apenas para exemplificar, o microsservi√ßo Conector pode ser implementado por uma Lambda Function exposta por meio do servi√ßo API Gateway. Neste cen√°rio, a a implementa√ß√£o do m√©todo <code>Conector.notificar(Resultado)</code> ter√° que fazer requisi√ß√µes <em>https</em> para o <em>endpoint</em> exposto pelo servi√ßo API Gateway, qe ser√£o redirecionadas para a Lambda Function corresondente.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="conector-cliente-arquivo"></a>conector-cliente (arquivo)<a class="hash-link" href="#conector-cliente-arquivo" title="Direct link to heading">#</a></h3><p>Naturalmente, a nuvem da Amazon pode n√£o ser uma op√ß√£o e, neste caso, outra estrat√©gia pode ser empregada, conforme o que melhor se alinha
ao contexto do estabelecimento de sa√∫de em quest√£o. Por exemplo, o cen√°rio no qual o laborat√≥rio n√£o emprega um SIS em execu√ß√£o em uma nuvem, mas em
sua pr√≥pria infraestrutura.</p><p>Adicionalmente, o SIS j√° oferece recurso para exportar em documento XML,
por exemplo, um laudo, com esquema bem-definido. Neste cen√°rio n√£o seria mais aproriado monitorar um diret√≥rio e a cada arquivo ali depositado, disparar o caso de uso <em>Enviar resultado de exame</em>? Observe que o SIS
existente, neste cen√°rio hipot√©tico, n√£o necessariamente sofre altera√ß√£o.</p><p>Apenas como informa√ß√£o adicional, a biblioteca <a href="https://www.npmjs.com/package/chokidar" target="_blank" rel="noopener noreferrer">Chokidar</a> tem como foco monitorar arquivos e diret√≥rios de forma eficiente, conforme sua documenta√ß√£o, e j√° foi baixada mais de 30 milh√µes de vezes &quot;nesta semana&quot;. Naturalmente √© uma op√ß√£o para implementar, em JavaScript, o que foi atribu√≠do √† biblioteca <code>conector-cliente</code>, neste estabelecimento fict√≠cio.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="rnds-biblioteca"></a>rnds (biblioteca)<a class="hash-link" href="#rnds-biblioteca" title="Direct link to heading">#</a></h3><p>√Äs fun√ß√µes atribu√≠das a esta biblioteca s√£o bem espec√≠ficas e podem ser encapsuladas, independente do cen√°rio do estabelecimento de sa√∫de em quest√£o. √â o que √© feito por meio da HAPI FHIR API, dentre outras op√ß√µes como a biblioteca <a href="https://www.npmjs.com/package/rnds" target="_blank" rel="noopener noreferrer">rnds</a>.</p><p>Considera√ß√µes feitas, o caso de uso <em>Obter token</em> est√° implementado, enquanto <em>Enviar resultado de exame</em>, apenas parcialmente, em JavaScript por meio do projeto <a href="https://www.npmjs.com/package/rnds" target="_blank" rel="noopener noreferrer">rnds</a> (projeto <em>open source</em>). Observe que o envio propriamente dito est√° implementado, enquanto as demais fun√ß√µes, filtrar, mapear e outras, tendo em vista a depend√™ncia do contexto de um estabelecimento de sa√∫de real, n√£o.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="fun√ß√µes-principais"></a>Fun√ß√µes principais<a class="hash-link" href="#fun√ß√µes-principais" title="Direct link to heading">#</a></h3><p>As estrat√©gias adotadas nas bibliotecas acima dificilmente podem ser replicadas aqui na implementa√ß√£o das fun√ß√µes ditas principais, como filtrar e mapear, por exemplo.</p><p>Quando em cen√°rio anterior foi dito que um SIS hipot√©tico √© capaz de exportar um documento XML pertinente a um resultado de exame, tem-se uma fun√ß√£o √∫til e que viabiliza o acr√©scimo do Conector sem necessidade de altera√ß√£o do SIS. Contudo, o esquema empregado pelo SIS, provavelmente, √© diferente daquele estabelecido pelo modelo computacional e tamb√©m pelo informacional correspondente. Em consequ√™ncia, n√£o h√° como implementar uma fun√ß√£o <em>filtrar</em> de forma gen√©rica, mas espec√≠fica e caso por caso.</p><p>Apesar de n√£o ser vi√°vel uma implementa√ß√£o que possa ser reutilizada, √© poss√≠vel indicar ferramentas √∫teis aos desenvolvedores, por exemplo,
que realizam opera√ß√µes sobre documentos XML. Observe que, mesmo neste exemplo, a sugest√£o pode n√£o se aplicar, pois um formato bin√°rio pr√≥prio pode ser empregado pelo SIS para exportar um resultado de exame, o que torna a indica√ß√£o pertinente √† XML irrelevante.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-02-04T23:22:43.000Z" class="docLastUpdatedAt_1Qna">2021-2-4</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/rnds/docs/introducao"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Introdu√ß√£o</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/rnds/docs/publico-alvo/publico-alvo"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">P√∫blico-alvo ¬ª</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#sistema-de-informa√ß√£o-em-sa√∫de-sis" class="table-of-contents__link">Sistema de Informa√ß√£o em Sa√∫de (SIS)</a><ul><li><a href="#sem-integra√ß√£o" class="table-of-contents__link">Sem integra√ß√£o</a></li><li><a href="#com-integra√ß√£o" class="table-of-contents__link">Com integra√ß√£o</a></li><li><a href="#design-do-conector-sem-restri√ß√µes" class="table-of-contents__link"><em>Design</em> do Conector (sem restri√ß√µes)</a></li></ul></li><li><a href="#conector-de-refer√™ncia" class="table-of-contents__link">Conector de refer√™ncia</a><ul><li><a href="#escopo" class="table-of-contents__link">Escopo</a></li></ul></li><li><a href="#requisitos" class="table-of-contents__link">Requisitos</a><ul><li><a href="#obter-token-de-acesso" class="table-of-contents__link">Obter token de acesso</a></li><li><a href="#enviar-resultado-de-exame" class="table-of-contents__link">Enviar resultado de exame</a></li></ul></li><li><a href="#design" class="table-of-contents__link">Design</a><ul><li><a href="#esbo√ßo-inicial" class="table-of-contents__link">Esbo√ßo inicial</a></li><li><a href="#esbo√ßo-resultante" class="table-of-contents__link">Esbo√ßo resultante</a></li></ul></li><li><a href="#implementa√ß√£o" class="table-of-contents__link">Implementa√ß√£o</a><ul><li><a href="#conector-cliente-aws" class="table-of-contents__link">conector-cliente (aws)</a></li><li><a href="#conector-cliente-arquivo" class="table-of-contents__link">conector-cliente (arquivo)</a></li><li><a href="#rnds-biblioteca" class="table-of-contents__link">rnds (biblioteca)</a></li><li><a href="#fun√ß√µes-principais" class="table-of-contents__link">Fun√ß√µes principais</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">T√≥picos</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/rnds/docs/rel/objetivo-rel">Resultado de Exame Laboratorial</a></li><li class="footer__item"><a class="footer__link-item" href="/rnds/docs/sa/objetivo-sa">Sum√°rio de Alta (SA)</a></li><li class="footer__item"><a class="footer__link-item" href="/rnds/docs/rac/objetivo-rac">Registro de Atendimento Cl√≠nico (RAC)</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Comunidade</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/kyriosdata/rnds" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Outros</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/rnds/blog">Not√≠cias</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2020, 2021 DATASUS (Minist√©rio da Sa√∫de)</div></div></div></footer></div>
<script src="/rnds/styles.0dfdfb78.js"></script>
<script src="/rnds/runtime~main.ea325c56.js"></script>
<script src="/rnds/main.83a45ca9.js"></script>
<script src="/rnds/1.9718fca7.js"></script>
<script src="/rnds/2.170e44de.js"></script>
<script src="/rnds/3.4645edd5.js"></script>
<script src="/rnds/1be78505.0290ccf8.js"></script>
<script src="/rnds/82.5dd44e3a.js"></script>
<script src="/rnds/f976f453.324c23db.js"></script>
<script src="/rnds/17896441.dd11868a.js"></script>
<script src="/rnds/efcb63d8.d8a67793.js"></script>
</body>
</html>